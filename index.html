<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>ブラックジャック戦略ガイド</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <header class="app-header">
      <h1>ブラックジャック戦略ガイド</h1>
    </header>

    <div class="tab-navigation">
      <button class="tab-btn active" data-tab="session">セッション管理</button>
      <button class="tab-btn" data-tab="rules">ルール</button>
      <button class="tab-btn" data-tab="history">履歴</button>
    </div>

    <!-- セッション管理 -->
    <section id="session" class="tab-content active">
      <div class="card">
        <div class="card__body">
          <h2 class="section-title">資金管理</h2>
          <div class="money-management">
            <div class="form-group">
              <label class="form-label" for="initialCapital">元金（円）</label>
              <input type="number" class="form-control" id="initialCapital" placeholder="例: 100000" min="0">
            </div>

            <div class="balance-display" id="balanceDisplay" style="display:none">
              <div class="balance-item">
                <span class="balance-label">現在残高</span>
                <span class="balance-value" id="currentBalance">0円</span>
              </div>

              <div class="balance-item">
                <span class="balance-label">ベット額</span>
                <span class="bet-amount" id="betAmount">0円</span>
              </div>

              <div class="balance-item">
                <span class="balance-label">ベット率</span>
                <span class="bet-rate" id="betRate">2.0%</span>
              </div>

              <div class="balance-item">
                <label class="auto-toggle">
                  <input type="checkbox" id="autoAdjustToggle" checked>
                  自動ベット調整
                </label>
              </div>

              <div class="targets-row">
                <div class="target-item win-target">
                  <span class="target-label">利確目標（+25%）</span>
                  <span class="target-value" id="winTarget">0円</span>
                </div>
                <div class="target-item loss-target">
                  <span class="target-label">損切目標（-25%）</span>
                  <span class="target-value" id="lossTarget">0円</span>
                </div>
              </div>
            </div>
          </div>

          <h3 class="strategy-title">基本戦略マトリクス（Hit/Stand）</h3>
          <div class="strategy-table-wrap">
            <table class="strategy-table" id="strategyTable" aria-label="ブラックジャック基本戦略表">
              <thead>
                <tr>
                  <th class="sticky">Player \\ Dealer</th>
                  <th>2</th><th>3</th><th>4</th><th>5</th><th>6</th>
                  <th>7</th><th>8</th><th>9</th><th>10</th><th>A</th>
                </tr>
              </thead>
              <tbody>
                <!-- Hard -->
                <tr class="group"><td colspan="11">Hard Hands</td></tr>
                <tr><th class="rowhdr">11</th><td>H</td><td>H</td><td>H</td><td>H</td><td>H</td><td>H</td><td>H</td><td>H</td><td>H</td><td>H</td></tr>
                <tr><th class="rowhdr">12</th><td>H</td><td>H</td><td>S</td><td>S</td><td>S</td><td>H</td><td>H</td><td>H</td><td>H</td><td>H</td></tr>
                <tr><th class="rowhdr">13</th><td>S</td><td>S</td><td>S</td><td>S</td><td>S</td><td>H</td><td>H</td><td>H</td><td>H</td><td>H</td></tr>
                <tr><th class="rowhdr">14</th><td>H</td><td>S</td><td>S</td><td>S</td><td>S</td><td>H</td><td>H</td><td>H</td><td>H</td><td>H</td></tr>
                <tr><th class="rowhdr">15</th><td>S</td><td>S</td><td>S</td><td>S</td><td>S</td><td>H</td><td>H</td><td>H</td><td>H</td><td>H</td></tr>
                <tr><th class="rowhdr">16</th><td>S</td><td>S</td><td>S</td><td>S</td><td>S</td><td>H</td><td>H</td><td>S</td><td>S</td><td>H</td></tr>
                <tr><th class="rowhdr">17+</th><td>S</td><td>S</td><td>S</td><td>S</td><td>S</td><td>S</td><td>S</td><td>S</td><td>S</td><td>S</td></tr>
                <!-- Soft -->
                <tr class="group"><td colspan="11">Soft Hands</td></tr>
                <tr><th class="rowhdr">Soft 17-</th><td>H</td><td>H</td><td>H</td><td>H</td><td>H</td><td>H</td><td>H</td><td>H</td><td>H</td><td>H</td></tr>
                <tr><th class="rowhdr">Soft 18</th><td>S</td><td>S</td><td>S</td><td>S</td><td>S</td><td>S</td><td>H</td><td>H</td><td>H</td><td>H</td></tr>
                <tr><th class="rowhdr">Soft 19+</th><td>S</td><td>S</td><td>S</td><td>S</td><td>S</td><td>S</td><td>S</td><td>S</td><td>S</td><td>S</td></tr>
              </tbody>
            </table>
            <div class="legend">
              <span class="chip chip-s">S = Stand</span>
              <span class="chip chip-h">H = Hit</span>
            </div>
          </div>

          <h3 class="session-title">セッション実行</h3>
          <div class="session-controls">
            <button id="startSession" class="btn btn--primary btn--full-width">セッション開始</button>

            <div id="gameButtons" class="game-buttons" style="display:none">
              <button id="winButton"  class="btn btn--success">Win</button>
              <button id="pushButton" class="btn btn--secondary">Push</button>
              <button id="loseButton" class="btn btn--error">Lose</button>
            </div>

            <div id="counters" class="counters" style="display:none">
              <div class="counter-item">
                <span class="counter-label">連勝</span>
                <span class="counter-value" id="winStreak">0</span>
              </div>
              <div class="counter-item">
                <span class="counter-label">連敗</span>
                <span class="counter-value" id="lossStreak">0</span>
              </div>
            </div>

            <button id="endSession" class="btn btn--outline btn--full-width" style="display:none">セッション終了</button>
          </div>
        </div>
      </div>
    </section>

    <!-- ルール -->
    <section id="rules" class="tab-content">
      <div class="card">
        <div class="card__body">
          <h2 class="section-title">ゲームルール</h2>
          <!-- ルール内容は前回と同じなので割愛 -->
          <p>詳細ルールは変更なし。</p>
        </div>
      </div>
    </section>

    <!-- 履歴 -->
    <section id="history" class="tab-content">
      <div class="card">
        <div class="card__body">
          <h2 class="section-title">セッション履歴</h2>
          <table class="history-table" id="historyTable">
            <thead>
              <tr>
                <th>開始</th><th>終了</th><th>初期資金</th><th>終了残高</th>
                <th>損益</th><th>時間</th><th>MaxWin</th><th>MaxLose</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </section>
  </div>

  <!-- フローティングタイマー -->
  <div id="floatingTimer" class="floating-timer" aria-live="polite" style="display:none">
    <div class="timer-body">
      <span class="timer-label">セッション時間</span>
      <span class="timer-value" id="timerValue">00:00:00</span>
      <button class="timer-btn" id="timerPauseBtn" title="一時停止">⏸︎</button>
      <button class="timer-btn" id="timerResetBtn" title="リセット">↺</button>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
