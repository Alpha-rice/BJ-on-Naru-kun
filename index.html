<!DOCTYPE html>
<html lang="ja" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blackjack Guide</title>
    <link rel="stylesheet" href="style.css">
    <script src="app.js" defer></script>
</head>
<body>
    <div class="container">
        <h1>七虎なるくんBJ攻略</h1>

        <!-- テーマ切替ボタン -->
        <button id="themeToggle" class="theme-toggle" aria-label="テーマを切り替える">
            <span id="themeIcon">🌙</span>
            <span id="themeText">Dark</span>
        </button>

        <!-- 資金管理 -->
        <section id="balanceSection">
            <h2>資金管理</h2>
            <div class="input-group">
                <label for="initialCapital">初期資金（円）:</label>
                <input type="number" id="initialCapital" placeholder="例: 10000" min="0">
            </div>
            
            <div id="balanceDisplay" style="display: none;">
                <p>現在残高: <strong id="currentBalance">0円</strong></p>
                <p>推奨ベット: <strong id="betAmount">0円</strong> (<span id="betRate">2.0%</span>)</p>
                <p>利確目標: <strong id="winTarget">0円</strong></p>
                <p>損切目標: <strong id="lossTarget">0円</strong></p>
                <p>連勝/連敗: <span id="winStreak">0勝 / 0敗</span></p>
                <div class="toggle-switch">
                    <input type="checkbox" id="autoAdjustToggle" checked>
                    <label for="autoAdjustToggle">ベット額を自動調整</label>
                </div>
            </div>

            <button id="startSession" class="btn">セッション開始</button>
            <button id="endSession" class="btn bad" style="display: none;">セッション終了</button>

            <div id="gameButtons" style="display: none;">
                <button id="winButton" class="btn good">勝利</button>
                <button id="pushButton" class="btn warn">プッシュ</button>
                <button id="loseButton" class="btn bad">敗北</button>
            </div>

            <!-- 資金推移チャート -->
            <div id="chartContainer" style="display: none;">
                <h3>📈 資金推移チャート</h3>
                <canvas id="sessionChart" width="600" height="200"></canvas>
            </div>
        </section>

        <!-- 基本戦略表 -->
        <section>
            <h2>基本戦略表</h2>
            <div class="table-wrap">
                <table class="strategy-table">
                    <thead>
                        <tr>
                            <th class="player-col">Player＼Dealer</th>
                            <th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th><th>10</th><th>A</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td colspan="11" class="group-header">Hard Hands</td></tr>
                        <tr>
                            <td class="player-col">17+</td>
                            <td>S</td><td>S</td><td>S</td><td>S</td><td>S</td><td>S</td><td>S</td><td>S</td><td>S</td><td>S</td>
                        </tr>
                        <tr>
                            <td class="player-col">13-16</td>
                            <td>S</td><td>S</td><td>S</td><td>S</td><td>S</td><td>H</td><td>H</td><td>H</td><td>H</td><td>H</td>
                        </tr>
                        <tr>
                            <td class="player-col">12</td>
                            <td>H</td><td>H</td><td>S</td><td>S</td><td>S</td><td>H</td><td>H</td><td>H</td><td>H</td><td>H</td>
                        </tr>
                        <tr>
                            <td class="player-col">11-</td>
                            <td>H</td><td>H</td><td>H</td><td>H</td><td>H</td><td>H</td><td>H</td><td>H</td><td>H</td><td>H</td>
                        </tr>
                        <tr><td colspan="11" class="group-header">Soft Hands</td></tr>
                        <tr>
                            <td class="player-col">19+</td>
                            <td>S</td><td>S</td><td>S</td><td>S</td><td>S</td><td>S</td><td>S</td><td>S</td><td>S</td><td>S</td>
                        </tr>
                        <tr>
                            <td class="player-col">18</td>
                            <td>S</td><td>S</td><td>S</td><td>S</td><td>S</td><td>S</td><td>S</td><td>H</td><td>H</td><td>H</td>
                        </tr>
                        <tr>
                            <td class="player-col">17-</td>
                            <td>H</td><td>H</td><td>H</td><td>H</td><td>H</td><td>H</td><td>H</td><td>H</td><td>H</td><td>H</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="legend">
                <div class="legend-item legend-hit">
                    <span class="legend-sample">H</span>
                    <span>Hit（カードを引く）</span>
                </div>
                <div class="legend-item legend-stand">
                    <span class="legend-sample">S</span>
                    <span>Stand（カードを引かない）</span>
                </div>
            </div>
        </section>

        <!-- 📈 セッション履歴 -->
        <section>
            <h2>📈 セッション履歴</h2>
            <div class="table-wrap">
                <table id="historyTable">
                    <thead>
                        <tr>
                            <th>開始時刻</th><th>損益</th><th>時間</th><th>最大連勝</th><th>最大連敗</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- 履歴はここに動的に追加されます -->
                    </tbody>
                </table>
            </div>
        </section>
    </div>

    <!-- フローティングタイマー -->
    <div id="floatingTimer" style="display: none;">
        <span id="timerValue">00:00:00</span>
        <button id="timerPauseBtn">⏸︎</button>
        <button id="timerResetBtn">🔄</button>
    </div>
</body>
</html>
